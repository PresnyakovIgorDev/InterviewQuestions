**Пул потоков**

Создание потоков требует времени. Если есть различные короткие задачи, подлежащие выполнению, можно создать набор потоков заранее и затем просто отправлять соответствующие запросы, когда наступает очередь для их выполнения. Было бы неплохо, если бы количество этих потоков автоматически увеличивалось с ростом потребности в потоках и уменьшалось при возникновении потребности в освобождении ресурсов.

Создавать подобный список потоков самостоятельно не понадобится. Для управления таким списком предусмотрен класс ThreadPool, который по мере необходимости уменьшает и увеличивает количество потоков в пуле до максимально допустимого. Значение максимально допустимого количества потоков в пуле может изменяться. В случае двуядерного ЦП оно по умолчанию составляет 1023 рабочих потоков и 1000 потоков ввода-вывода.



Здесь может возникнуть вопрос: в чем же преимущество использования  поддерживаемого CLR пула потоков по сравнению с явным созданием объектов  Thread? Ниже перечислены эти преимущества: 

- Пул потоков управляет потоками эффективно, уменьшая количество создаваемых, запускаемых и останавливаемых потоков.
- Используя пул потоков, можно сосредоточиться на решении задачи, а не на инфраструктуре потоков приложения.

Тем не менее, в некоторых случаях предпочтительно ручное управление  потоками. Пулы потоков очень просты в применении, однако обладают рядом  ограничений, которые перечислены ниже: 

- Все потоки в пуле потоков являются фоновыми. В случае  завершения работы всех приоритетных потоков в процессе работа всех  фоновых потоков тоже останавливается. Сделать поток из пула приоритетным  не удастся.
- Нельзя изменять приоритет или имя находящего в пуле потока.  Все потоки в пуле представляют собой потоки многопоточного апартамента (**multi-threaded apartment — МТА**), а многие СОМ-объекты требуют использования потоков однопоточного апартамента (**single-threaded apartment — STA**).
- Потоки в пуле подходят для выполнения только коротких задач.  Если необходимо, чтобы поток функционировал все время (как, например,  поток средства проверки орфографии в Word), его следует создавать с  помощью класса Thread.
- Нельзя создать поток с фиксированной идентичностью, чтобы можно было прерывать его или находить по имени.